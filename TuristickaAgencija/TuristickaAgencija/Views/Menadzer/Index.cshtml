@using TuristickaAgencija.Models
@{
    ViewBag.Title = "Index";
    Korisnik ja = (Korisnik)Session["login"];
    List<Aranzman> mojiAranzmani;
    if (Session["filter"] == null) {
        mojiAranzmani = ja.ListaAranzmana;
    }
    else
    {
        mojiAranzmani = (List<Aranzman>)Session["filter"];
    }
    Session["page"] = "protekli";
}
<form method="post" action="~/Menadzer/FilterA?page=index">
    <div>
        <p style="font-weight:bold; font-size:20px; font-family:Cambria;">Datum pocetka</p>
        <div style="border:2px dotted black; width:250px; height:90px;">
            <div style=" position:relative; left:10px; top:10px;">
                <p>Od:</p>
                <input type="text" style="width:100px;" placeholder="dd/MM/yyyy" name="datumPocetkaOd" />
            </div>
            <div style="position:relative; left:130px; top:-48px;">
                <p>Do:</p>
                <input type="text" style="width:100px;" placeholder="dd/MM/yyyy" name="datumPocetkaDo" />
            </div>
        </div>
    </div>
    <div style="position:relative; left:260px; top:-128px;">
        <p style="font-weight:bold; font-size:20px; font-family:Cambria;">Datum kraja</p>
        <div style="border:2px dotted black; width:250px; height:90px;">
            <div style=" position:relative; left:10px; top:10px;">
                <p>Od:</p>
                <input type="text" style="width:100px;" placeholder="dd/MM/yyyy" name="datumKrajaOd" />
            </div>
            <div style="position:relative; left:130px; top:-48px;">
                <p>Do:</p>
                <input type="text" style="width:100px;" placeholder="dd/MM/yyyy" name="datumKrajaDo" />
            </div>
        </div>
    </div>
    <div style="position:relative; top:-110px;">
        <p>Tip prevoza:</p>
        <select name="tipPrevoza" style="width:130px;">
            <option value="/">/</option>
            <option value="Autobus">Autobus</option>
            <option value="Avion">Avion</option>
            <option value="Autobus+Avion">Autobus+Avion</option>
            <option value="Individualno">Individualno</option>
            <option value="Ostalo">Ostalo</option>
        </select>
    </div>
    <div style="position:relative; top:-160px; left:170px;">
        <p>Tip aranzmana:</p>
        <select name="tipAranzmana" style="width:130px;">
            <option value="/">/</option>
            <option value="NocenjeSaDoruckom">NocenjeSaDoruckom</option>
            <option value="PoluPansion">PoluPansion</option>
            <option value="PunPansion">PunPansion</option>
            <option value="AllInclusive">AllInclusive</option>
            <option value="NajamApartmana">Najam apartmana</option>
        </select>
    </div>
    <div style="position:relative; top:-213px; left:340px;">
        <p>Naziv:</p>
        <input type="text" style="width:150px;" name="naziv" />
    </div>

    <div style="position:relative; top:-180px; left:50px;">
        <select style="height:30px; width:200px;" name="sortOpcija">
            <option value="naziv">Naziv</option>
            <option value="datumPocetka">Datum pocetka</option>
            <option value="datumKraja">Datum zavrsetka</option>
        </select>
        <select style="height:30px; width:200px;" name="sortNacin">
            <option value="rastuce">Rastuce</option>
            <option value="opadajuce">Opadajuce</option>
        </select>
    </div>

    <input type="submit" value="Filtriraj po aranzmanima" style="position:relative; top:-140px; left:180px;" />
</form>

<div style="position:relative; top:-238px;left:640px;">
    <form method="post" action="~/Menadzer/FilterS?page=index">
        <div style="position:relative; top:-220px;">
            <p>Tip smestaja:</p>
            <select name="tipSmestaja" style="width:130px;">
                <option value="/">/</option>
                <option value="Hotel">Hotel</option>
                <option value="Motel">Motel</option>
                <option value="Vila">Vila</option>
            </select>
        </div>
        <div style="position:relative; top:-270px; left:170px;">
            <p>Bazen:</p>
            <select name="bazen" style="width:130px;">
                <option value="/">/</option>
                <option value="DA">Da</option>
                <option value="NE">Ne</option>
            </select>
        </div>
        <div style="position:relative; top:-320px; left:345px;">
            <p>Spa centar:</p>
            <select name="spa" style="width:130px;">
                <option value="/">/</option>
                <option value="DA">Da</option>
                <option value="NE">Ne</option>
            </select>
        </div><br />
        <div style="position:relative; top:-310px;">
            <p>Za osobe sa invaliditetom:</p>
            <select name="invalidi" style="width:130px;">
                <option value="/">/</option>
                <option value="DA">Da</option>
                <option value="NE">Ne</option>
            </select>
        </div>
        <div style="position:relative; top:-360px; left:170px;">
            <p>WiFi:</p>
            <select name="wifi" style="width:130px;">
                <option value="/">/</option>
                <option value="DA">Da</option>
                <option value="NE">Ne</option>
            </select>
        </div>
        <div style="position:relative; top:-413px; left:340px;">
            <p>Naziv:</p>
            <input type="text" style="width:150px;" name="naziv" />
        </div>

        <div style="position:relative; top:-317px; left:50px;">
            <select style="height:30px; width:200px;" name="sortOpcija">
                <option value="naziv">Naziv</option>
                <option value="brojJedinica">Broj smestajnih jedinica</option>
                <option value="brojSlobodnih">Broj slobodnih jedinica</option>
            </select>
            <select style="height:30px; width:200px;" name="sortNacin">
                <option value="rastuce">Rastuce</option>
                <option value="opadajuce">Opadajuce</option>
            </select><br /><br /><br />
            <input type="submit" value="Filtriraj po smestajima" style="position:relative; left:120px;" />
        </div>

    </form>
</div>

<div style="position:relative; top:-480px;">

    @if (TempData["message"] != null)
    {
        <p style="text-align:center; font-family:Cambria; font-size:20px; font-weight:bold; font-style:italic;">@TempData["message"]</p>
        TempData["message"] = null;
        <br />
    }
    <table style="border-left:0px; border-right:0px;">
        <tr style="border-bottom:3px solid black; border-top:0px solid black;">
            <td width="250" align="center" style="font-weight:bold; font-size:22px; font-family:Cambria;">Polazak</td>
            <td width="250" align="center" style="font-weight:bold; font-size:22px; font-family:Cambria;">Povratak</td>
            <td width="200" align="center" style="font-weight:bold; font-size:22px; font-family:Cambria;">Dana</td>
            <td width="400" align="center" style="font-weight:bold; font-size:22px; font-family:Cambria;">Naziv</td>
            <td width="700" align="center" style="font-weight:bold; font-size:22px; font-family:Cambria;" colspan="2">Destinacija &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
            <td width="300" align="center" style="font-weight:bold; font-size:22px; font-family:Cambria;">Cena</td>
            <td width="300" align="center" style="font-weight:bold; font-size:22px; font-family:Cambria;">Detalji</td>
        </tr>
        @foreach (Aranzman aranzman in mojiAranzmani)
        {
            if (!aranzman.Obrisan)
            {
                int dana = (int)(aranzman.DatumZavrsetka - aranzman.DatumPocetka).TotalDays;
                double minCena = 0;
                if (!aranzman.SmestajAranzmana.Obrisan)
                {
                    foreach (SmestajnaJedinica jedinica in aranzman.SmestajAranzmana.Jedinice)
                    {
                        if (!jedinica.Obrisana && (minCena == 0 || minCena > jedinica.CenaZaCeluJedinicu))
                        {
                            minCena = jedinica.CenaZaCeluJedinicu;
                        }
                    }
                }

                <tr style="border-bottom:1px solid black; border-top:1px solid black">
                    <td width="250" align="center" style="font-size:18px;">@aranzman.DatumPocetka.ToString("dd'/'MM'/'yyyy")</td>
                    <td width="250" align="center" style="font-size:18px">@aranzman.DatumZavrsetka.ToString("dd'/'MM'/'yyyy")</td>
                    <td width="200" align="center" style="font-size:18px">@dana</td>
                    <td width="400" align="center" style="font-size:18px">@aranzman.Naziv</td>
                    <td width="300" align="center"><img src="~/Images/@aranzman.PosterAranzmana" height="60" width="60" style="border-radius:50%" /></td>
                    <td width="300" align="left" style="font-size:18px">@aranzman.Lokacija</td>
                    @if (minCena != 0)
                    {
                        <td width="300" align="center" style="font-size:18px">VEĆ OD @minCena &#8364;</td>
                    }
                    else
                    {
                        <td width="300" align="center" style="font-size:18px">Nema dostupnih smestaja</td>
                    }
                    <td width="300" align="center"><a href="~/Menadzer/DetaljiAranzmana?name=@aranzman.Naziv" style="font-size:20px">Pogledaj</a></td>
                </tr>
            }
        }
    </table>
    <br /><br /><br />
    <a href="~/Menadzer/DodajAranzman" style=" position:relative; left:430px;">Napravi novi aranzman</a>
</div>